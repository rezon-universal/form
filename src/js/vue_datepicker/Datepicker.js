/*translations*/
var DateLanguages = {
    translations: {
        'ar': {
            'language': 'Arabic',
            'rtl': true,
            'months': {
                'original': ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوڤمبر', 'ديسمبر'],
                'abbr': ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوڤمبر', 'ديسمبر']
            },
            'days': ['أحد', 'إثنين', 'ثلاثاء', 'أربعاء', 'خميس', 'جمعة', 'سبت']
        },
        'bg': {
            'language': 'Bulgarian',
            'months': {
                'original': ['Януари', 'Февруари', 'Март', 'Април', 'Май', 'Юни', 'Юли', 'Август', 'Септември', 'Октомври', 'Ноември', 'Декември'],
                'abbr': ['Ян', 'Фев', 'Мар', 'Апр', 'Май', 'Юни', 'Юли', 'Авг', 'Сеп', 'Окт', 'Ное', 'Дек']
            },
            'days': ['Нд', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб']
        },
        'bs': {
            'language': 'Bosnian',
            'months': {
                'original': ['Januar', 'Februar', 'Mart', 'April', 'Maj', 'Juni', 'Juli', 'Avgust', 'Septembar', 'Oktobar', 'Novembar', 'Decembar'],
                'abbr': ['Jan', 'Feb', 'Mar', 'Apr', 'Maj', 'Jun', 'Jul', 'Avg', 'Sep', 'Okt', 'Nov', 'Dec']
            },
            'days': ['Ned', 'Pon', 'Uto', 'Sri', 'Čet', 'Pet', 'Sub']
        },
        'cs': {
            'language': 'Czech',
            'months': {
                'original': ['leden', 'únor', 'březen', 'duben', 'květen', 'červen', 'červenec', 'srpen', 'září', 'říjen', 'listopad', 'prosinec'],
                'abbr': ['led', 'úno', 'bře', 'dub', 'kvě', 'čer', 'čec', 'srp', 'zář', 'říj', 'lis', 'pro']
            },
            'days': ['ne', 'po', 'út', 'st', 'čt', 'pá', 'so']
        },
        'da': {
            'language': 'Danish',
            'months': {
                'original': ['Januar', 'Februar', 'Marts', 'April', 'Maj', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'December'],
                'abbr': ['Jan', 'Feb', 'Mar', 'Apr', 'Maj', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec']
            },
            'days': ['Sø', 'Ma', 'Ti', 'On', 'To', 'Fr', 'Lø']
        },
        'de': {
            'language': 'German',
            'months': {
                'original': ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
                'abbr': ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez']
            },
            'days': ['So.', 'Mo.', 'Di.', 'Mi.', 'Do.', 'Fr.', 'Sa.']
        },
        'ee': {
            'language': 'Estonian',
            'months': {
                'original': ['Jaanuar', 'Veebruar', 'Märts', 'Aprill', 'Mai', 'Juuni', 'Juuli', 'August', 'September', 'Oktoober', 'November', 'Detsember'],
                'abbr': ['Jaan', 'Veebr', 'Märts', 'Apr', 'Mai', 'Juuni', 'Juuli', 'Aug', 'Sept', 'Okt', 'Nov', 'Dets']
            },
            'days': ['P', 'E', 'T', 'K', 'N', 'R', 'L']
        },
        'el': {
            'language': 'Greek',
            'months': {
                'original': ['Ιανουάριος', 'Φεβρουάριος', 'Μάρτιος', 'Απρίλιος', 'Μάϊος', 'Ιούνιος', 'Ιούλιος', 'Αύγουστος', 'Σεπτέμβριος', 'Οκτώβριος', 'Νοέμβριος', 'Δεκέμβριος'],
                'abbr': ['Ιαν', 'Φεβ', 'Μαρ', 'Απρ', 'Μαι', 'Ιουν', 'Ιουλ', 'Αυγ', 'Σεπ', 'Οκτ', 'Νοε', 'Δεκ']
            },
            'days': ['Κυρ', 'Δευ', 'Τρι', 'Τετ', 'Πεμ', 'Παρ', 'Σατ']
        },
        'en': {
            'language': 'English',
            'months': {
                'original': ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                'abbr': ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            },
            'days': ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']
        },
        'es': {
            'language': 'Spanish',
            'months': {
                'original': ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                'abbr': ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic']
            },
            'days': ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sab']
        },
        'fi': {
            'language': 'Finish',
            'months': {
                'original': ['tammikuu', 'helmikuu', 'maaliskuu', 'huhtikuu', 'toukokuu', 'kesäkuu', 'heinäkuu', 'elokuu', 'syyskuu', 'lokakuu', 'marraskuu', 'joulukuu'],
                'abbr': ['tammi', 'helmi', 'maalis', 'huhti', 'touko', 'kesä', 'heinä', 'elo', 'syys', 'loka', 'marras', 'joulu']
            },
            'days': ['su', 'ma', 'ti', 'ke', 'to', 'pe', 'la']
        },
        'fr': {
            'language': 'French',
            'months': {
                'original': ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],
                'abbr': ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin', 'Juil', 'Août', 'Sep', 'Oct', 'Nov', 'Déc']
            },
            'days': ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam']
        },
        'ja': {
            'language': 'Japanese',
            'months': {
                'original': ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
                'abbr': ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月']
            },
            'days': ['日', '月', '火', '水', '木', '金', '土']
        },
        'he': {
            'language': 'Hebrew',
            'rtl': true,
            'months': {
                'original': ['ינואר', 'פברואר', 'מרץ', 'אפריל', 'מאי', 'יוני', 'יולי', 'אוגוסט', 'ספטמבר', 'אוקטובר', 'נובמבר', 'דצמבר'],
                'abbr': ['ינו', 'פבר', 'מרץ', 'אפר', 'מאי', 'יונ', 'יול', 'אוג', 'ספט', 'אוק', 'נוב', 'דצמ']
            },
            'days': ['א', 'ב', 'ג', 'ד', 'ה', 'ו', 'ש']
        },
        'hu': {
            'language': 'Hungarian',
            'months': {
                'original': ['Január', 'Február', 'Március', 'Április', 'Május', 'Június', 'Július', 'Augusztus', 'Szeptember', 'Október', 'November', 'December'],
                'abbr': ['Jan', 'Febr', 'Márc', 'Ápr', 'Máj', 'Jún', 'Júl', 'Aug', 'Szept', 'Okt', 'Nov', 'Dec']
            },
            'days': ['Vas', 'Hét', 'Ke', 'Sze', 'Csü', 'Pén', 'Szo']
        },
        'hr': {
            'language': 'Croatian',
            'months': {
                'original': ['Siječanj', 'Veljača', 'Ožujak', 'Travanj', 'Svibanj', 'Lipanj', 'Srpanj', 'Kolovoz', 'Rujan', 'Listopad', 'Studeni', 'Prosinac'],
                'abbr': ['Sij', 'Velj', 'Ožu', 'Tra', 'Svi', 'Lip', 'Srp', 'Kol', 'Ruj', 'Lis', 'Stu', 'Pro']
            },
            'days': ['Ned', 'Pon', 'Uto', 'Sri', 'Čet', 'Pet', 'Sub']
        },
        'id': {
            'language': 'Indonesian',
            'months': {
                'original': ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'],
                'abbr': ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Agu', 'Sep', 'Okt', 'Nov', 'Des']
            },
            'days': ['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab']
        },
        'it': {
            'language': 'Italian',
            'months': {
                'original': ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno', 'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'],
                'abbr': ['Gen', 'Feb', 'Mar', 'Apr', 'Mag', 'Giu', 'Lug', 'Ago', 'Set', 'Ott', 'Nov', 'Dic']
            },
            'days': ['Dom', 'Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab']
        },
        'is': {
            'language': 'Icelandic',
            'months': {
                'original': ['Janúar', 'Febrúar', 'Mars', 'Apríl', 'Maí', 'Júní', 'Júlí', 'Ágúst', 'September', 'Október', 'Nóvember', 'Desember'],
                'abbr': ['Jan', 'Feb', 'Mars', 'Apr', 'Maí', 'Jún', 'Júl', 'Ágú', 'Sep', 'Okt', 'Nóv', 'Des']
            },
            'days': ['Sun', 'Mán', 'Þri', 'Mið', 'Fim', 'Fös', 'Lau']
        },
        'fa': {
            'language': 'Persian',
            'months': {
                'original': ['فروردین', 'اردیبهشت', 'خرداد', 'تیر', 'مرداد', 'شهریور', 'مهر', 'آبان', 'آذر', 'دی', 'بهمن', 'اسفند'],
                'abbr': ['فرو', 'ارد', 'خرد', 'تیر', 'مرد', 'شهر', 'مهر', 'آبا', 'آذر', 'دی', 'بهم', 'اسف']
            },
            'days': ['یکشنبه', 'دوشنبه', 'سه‌شنبه', 'چهارشنبه', 'پنجشنبه', 'جمعه', 'شنبه']
        },
        'ko': {
            'language': 'Korean',
            'months': {
                'original': ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
                'abbr': ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월']
            },
            'days': ['일', '월', '화', '수', '목', '금', '토']
        },
        'lt': {
            'language': 'Lithuanian',
            'months': {
                'original': ['Sausis', 'Vasaris', 'Kovas', 'Balandis', 'Gegužė', 'Birželis', 'Liepa', 'Rugpjūtis', 'Rugsėjis', 'Spalis', 'Lapkritis', 'Gruodis'],
                'abbr': ['Sau', 'Vas', 'Kov', 'Bal', 'Geg', 'Bir', 'Lie', 'Rugp', 'Rugs', 'Spa', 'Lap', 'Gru']
            },
            'days': ['Sek', 'Pir', 'Ant', 'Tre', 'Ket', 'Pen', 'Šeš']
        },
        'lv': {
            'language': 'Latvian',
            'months': {
                'original': ['Janvāris', 'Februāris', 'Marts', 'Aprīlis', 'Maijs', 'Jūnijs', 'Jūlijs', 'Augusts', 'Septembris', 'Oktobris', 'Novembris', 'Decembris'],
                'abbr': ['Jan', 'Feb', 'Mar', 'Apr', 'Mai', 'Jūn', 'Jūl', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec']
            },
            'days': ['Sv', 'Pr', 'Ot', 'Tr', 'Ce', 'Pk', 'Se']
        },
        'nl': {
            'language': 'Dutch',
            'months': {
                'original': ['januari', 'februari', 'maart', 'april', 'mei', 'juni', 'juli', 'augustus', 'september', 'oktober', 'november', 'december'],
                'abbr': ['jan', 'feb', 'maa', 'apr', 'mei', 'jun', 'jul', 'aug', 'sep', 'okt', 'nov', 'dec']
            },
            'days': ['zo', 'ma', 'di', 'wo', 'do', 'vr', 'za']
        },
        'nb-no': {
            'language': 'Norwegian Bokmål',
            'months': {
                'original': ['Januar', 'Februar', 'Mars', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Desember'],
                'abbr': ['Jan', 'Feb', 'Mar', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Des']
            },
            'days': ['Sø', 'Ma', 'Ti', 'On', 'To', 'Fr', 'Lø']
        },
        'pl': {
            'language': 'Polish',
            'months': {
                'original': ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'],
                'abbr': ['Sty', 'Lut', 'Mar', 'Kwi', 'Maj', 'Cze', 'Lip', 'Sie', 'Wrz', 'Paź', 'Lis', 'Gru']
            },
            'days': ['Nd', 'Pn', 'Wt', 'Śr', 'Czw', 'Pt', 'Sob']
        },
        'pt-br': {
            'language': 'Brazilian',
            'months': {
                'original': ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                'abbr': ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez']
            },
            'days': ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sab']
        },
        'ro': {
            'language': 'Romanian',
            'months': {
                'original': ['Ianuarie', 'Februarie', 'Martie', 'Aprilie', 'Mai', 'Iunie', 'Iulie', 'August', 'Septembrie', 'Octombrie', 'Noiembrie', 'Decembrie'],
                'abbr': ['Ian', 'Feb', 'Mar', 'Apr', 'Mai', 'Iun', 'Iul', 'Aug', 'Sep', 'Oct', 'Noi', 'Dec']
            },
            'days': ['D', 'L', 'Ma', 'Mi', 'J', 'V', 'S']
        },
        'ru': {
            'language': 'Russian',
            'months': {
                'original': ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],
                'abbr': ['Янв', 'Февр', 'Март', 'Апр', 'Май', 'Июнь', 'Июль', 'Авг', 'Сент', 'Окт', 'Нояб', 'Дек']
            },
            'days': ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб']
        },
        'sv': {
            'language': 'Swedish',
            'months': {
                'original': ['Januari', 'Februari', 'Mars', 'April', 'Maj', 'Juni', 'Juli', 'Augusti', 'September', 'Oktober', 'November', 'December'],
                'abbr': ['Jan', 'Feb', 'Mar', 'Apr', 'Maj', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            },
            'days': ['Sön', 'Mån', 'Tis', 'Ons', 'Tor', 'Fre', 'Lör']
        },
        'sk': {
            'language': 'Slovakian',
            'months': {
                'original': ['január', 'február', 'marec', 'apríl', 'máj', 'jún', 'júl', 'august', 'september', 'október', 'november', 'december'],
                'abbr': ['jan', 'feb', 'mar', 'apr', 'máj', 'jún', 'júl', 'aug', 'sep', 'okt', 'nov', 'dec']
            },
            'days': ['ne', 'po', 'ut', 'st', 'št', 'pi', 'so']
        },
        'sl-si': {
            'language': 'Sloveian',
            'months': {
                'original': ['Januar', 'Februar', 'Marec', 'April', 'Maj', 'Junij', 'Julij', 'Avgust', 'September', 'Oktober', 'November', 'December'],
                'abbr': ['Jan', 'Feb', 'Mar', 'Apr', 'Maj', 'Jun', 'Jul', 'Avg', 'Sep', 'Okt', 'Nov', 'Dec']
            },
            'days': ['Ned', 'Pon', 'Tor', 'Sre', 'Čet', 'Pet', 'Sob']
        },
        'th': {
            'language': 'Thai',
            'months': {
                'original': ['มกราคม', 'กุมภาพันธ์', 'มีนาคม', 'เมษายน', 'พฤษภาคม', 'มิถุนายน', 'กรกฎาคม', 'สิงหาคม', 'กันยายน', 'ตุลาคม', 'พฤศจิกายน', 'ธันวาคม'],
                'abbr': ['ม.ค.', 'ก.พ.', 'มี.ค.', 'เม.ย.', 'พ.ค.', 'มิ.ย.', 'ก.ค.', 'ส.ค.', 'ก.ย.', 'ต.ค.', 'พ.ย.', 'ธ.ค.']
            },
            'days': ['อา', 'จ', 'อ', 'พ', 'พฤ', 'ศ', 'ส']
        },
        'tr': {
            'language': 'Turkish',
            'months': {
                'original': ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'],
                'abbr': ['Oca', 'Şub', 'Mar', 'Nis', 'May', 'Haz', 'Tem', 'Ağu', 'Eyl', 'Eki', 'Kas', 'Ara']
            },

            'days': ['Paz', 'Pzt', 'Sal', 'Çar', 'Per', 'Cum', 'Cmt']
        },
        'uk': {
            'language': 'Ukraine',
            'months': {
                'original': ['Січень', 'Лютий', 'Березень', 'Квітень', 'Травень', 'Червень', 'Липень', 'Серпень', 'Вересень', 'Жовтень', 'Листопад', 'Грудень'],
                'abbr': ['Січ', 'Лют', 'Бер', 'Квіт', 'Трав', 'Чер', 'Лип', 'Серп', 'Вер', 'Жовт', 'Лист', 'Груд']
            },
            'days': ['Нд', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб']
        },
        'vi': {
            'language': 'Vientnamese',
            'months': {
                'original': ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'],
                'abbr': ['T 01', 'T 02', 'T 03', 'T 04', 'T 05', 'T 06', 'T 07', 'T 08', 'T 09', 'T 10', 'T 11', 'T 12']
            },
            'days': ['CN', 'Thứ 2', 'Thứ 3', 'Thứ 4', 'Thứ 5', 'Thứ 6', 'Thứ 7']
        },
        'zh': {
            'language': 'Chinese',
            'months': {
                'original': ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
                'abbr': ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月']
            },
            'days': ['日', '一', '二', '三', '四', '五', '六']
        }
    }
    
}

/*DateUtils*/
/**
  * Validates a date object
  * @param {Date} date - an object instantiated with the new Date constructor
  * @return {Boolean}
  */
var DateUtils = {
    /**
         * Validates a date object
         * @param {Date} date - an object instantiated with the new Date constructor
         * @return {Boolean}
         */
    isValidDate: function (date) {
        if (Object.prototype.toString.call(date) !== '[object Date]') {
            return false;
        }
        return !isNaN(date.getTime());
    },
    /**
     * Return abbreviated week day name
     * @param {Date}
     * @param {Array}
     * @return {String}
     */
    getDayNameAbbr: function (date, days) {
        if (typeof date !== 'object') {
            throw TypeError('Invalid Type');
        }
        return days[date.getDay()];
    },
    /**
     * Return name of the month
     * @param {Number|Date}
     * @param {Array}
     * @return {String}
     */
    getMonthName: function (month, months) {
        if (!months) {
            throw Error('missing 2nd parameter Months array');
        }
        if (typeof month === 'object') {
            return months[month.getMonth()];
        }
        if (typeof month === 'number') {
            return months[month];
        }
        throw TypeError('Invalid type');
    },
    /**
     * Return an abbreviated version of the month
     * @param {Number|Date}
     * @return {String}
     */
    getMonthNameAbbr: function (month, monthsAbbr) {
        if (!monthsAbbr) {
            throw Error('missing 2nd paramter Months array');
        }
        if (typeof month === 'object') {
            return monthsAbbr[month.getMonth()];
        }
        if (typeof month === 'number') {
            return monthsAbbr[month];
        }
        throw TypeError('Invalid type');
    },
    /**
     * Alternative get total number of days in month
     * @param {Number} year
     * @param {Number} m
     * @return {Number}
     */
    daysInMonth: function (year, month) {
        return /8|3|5|10/.test(month) ? 30 : month === 1 ? (!(year % 4) && year % 100) || !(year % 400) ? 29 : 28 : 31;
    },
    /**
     * Get nth suffix for date
     * @param {Number} day
     * @return {String}
     */
    getNthSuffix: function (day) {
        switch (day) {
            case 1:
            case 21:
            case 31:
                return 'st';
            case 2:
            case 22:
                return 'nd';
            case 3:
            case 23:
                return 'rd';
            default:
                return 'th';
        }
    },
    /**
     * Formats date object
     * @param {Date}
     * @param {String}
     * @param {Object}
     * @return {String}
     */
    formatDate: function (date, format, translation) {
        translation = (!translation) ? DateLanguages_1.default.translations.en : translation;
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var day = date.getDate();
        var str = format
            .replace(/dd/, ('0' + day).slice(-2))
            .replace(/d/, day)
            .replace(/yyyy/, year)
            .replace(/yy/, String(year).slice(2))
            .replace(/MMMM/, this.getMonthName(date.getMonth(), translation.months.original))
            .replace(/MMM/, this.getMonthNameAbbr(date.getMonth(), translation.months.abbr))
            .replace(/MM/, ('0' + month).slice(-2))
            .replace(/M(?!a|ä)/, month)
            .replace(/su/, this.getNthSuffix(date.getDate()))
            .replace(/D(?!e|é|i)/, this.getDayNameAbbr(date, translation.days));
        return str;
    },
    /**
     * Creates an array of dates for each day in between two dates.
     * @param {Date} start
     * @param {Date} end
     * @return {Array}
     */
    createDateArray: function (start, end) {
        var dates = [];
        while (start <= end) {
            dates.push(new Date(start));
            start = new Date(start).setDate(new Date(start).getDate() + 1);
        }
        return dates;
    }
}

var defaultDatepickerSettings = {
    template:
"<div>" +
    "<div class=\"vdp-datepicker\" :class=\"[wrapperClass,isRtl ? 'rtl' :'']\">" +
        "<div :class=\"{'input-group' : bootstrapStyling}\">"+
            "<span class=\"vdp-datepicker__calendar-button\" :class=\"{'input-group-addon' : bootstrapStyling}\" v-if=\"calendarButton\" @click=\"showCalendar\"><i :class=\"calendarButtonIcon\">" +
                "<span v-if=\"calendarButtonIcon.length === 0\">&hellip;</span></i>" +
            "</span>"+
            "<input :type=\"inline ? 'hidden' : 'text'\" :class=\"[ inputClass, { 'form-control' : bootstrapStyling } ]\" :name=\"name\" :id=\"id\" @click=\"showCalendar\" :value=\"formattedValue\" :placeholder=\"placeholder\" :clear-button=\"clearButton\" :disabled=\"disabledPicker\" :required=\"required\" readonly>"+
            "<span class=\"vdp-datepicker__clear-button\" :class=\"{'input-group-addon' : bootstrapStyling}\" v-if=\"clearButton && selectedDate\" @click=\"clearDate()\">" +
                "<i :class=\"clearButtonIcon\">" +
                    "<span v-if=\"calendarButtonIcon.length === 0\">&times;</span>" +
                "</i>" +
            "</span>"+
        "</div>" +
        //<!-- Day View -->
        "<div :class=\"[calendarClass, 'vdp-datepicker__calendar']\" v-show=\"showDayView\" v-bind:style=\"calendarStyle\">" +
            "<header>" +
                "<span @click=\"isRtl ? nextMonth() : previousMonth()\" class=\"prev\" v-bind:class=\"{ 'disabled' : isRtl ? nextMonthDisabled(pageDate) : previousMonthDisabled(pageDate) }\">&lt;</span>" +
                "<span @click=\"showMonthCalendar\" :class=\"!dayViewOnly ? 'up' : ''\">{{ currMonthName }} {{ currYear }}</span>" +
                "<span @click=\"isRtl ? previousMonth() : nextMonth()\" class=\"next\" v-bind:class=\"{ 'disabled' : isRtl ? previousMonthDisabled(pageDate) : nextMonthDisabled(pageDate) }\">&gt;</span>" +
            "</header>"+
            "<div :class=\"isRtl ? 'flex-rtl' : ''\">" +
                "<span class=\"cell day-header\" v-for=\"d in daysOfWeek\">{{ d }}</span>" +
                "<span class=\"cell day blank\" v-for=\"d in blankDays\"></span>" +
                // "<!---->" +
                "<span class=\"cell day\" v-for=\"day in days\" track-by=\"timestamp\" v-bind:class=\"dayClasses(day)\" @click=\"selectDate(day)\">{{ day.date }}</span>"+
            "</div>"+
        "</div>" +
        // <!-- Month View -->
        "<template v-if=\"!dayViewOnly\">"+
            "<div :class=\"[calendarClass, 'vdp-datepicker__calendar']\" v-show=\"showMonthView\" v-bind:style=\"calendarStyle\">"+
                "<header>" +
                    "<span @click=\"previousYear\" class=\"prev\" v-bind:class=\"{ 'disabled' : previousYearDisabled(pageDate) }\">&lt;</span>" +
                    "<span @click=\"showYearCalendar\" class=\"up\">{{ getPageYear() }}</span>" +
                    "<span @click=\"nextYear\" class=\"next\" v-bind:class=\"{ 'disabled' : nextYearDisabled(pageDate) }\">&gt;</span>" +
                "</header>" +
                "<span class=\"cell month\" v-for=\"month in months\" track-by=\"timestamp\" v-bind:class=\"{ 'selected': month.isSelected, 'disabled': month.isDisabled }\" @click.stop=\"selectMonth(month)\">{{ month.month }}</span>" +
            "</div>"+
        "</template>" +
        // <!-- Year View -->
        "<template v-if=\"!dayViewOnly\">" +
            "<div :class=\"[calendarClass, 'vdp-datepicker__calendar']\" v-show=\"showYearView\" v-bind:style=\"calendarStyle\">" +
                "<header>" +
                    "<span @click=\"previousDecade\" class=\"prev\" v-bind:class=\"{ 'disabled' : previousDecadeDisabled(pageDate) }\">&lt;</span>" +
                    "<span>{{ getPageDecade() }}</span>" +
                    "<span @click=\"nextDecade\" class=\"next\" v-bind:class=\"{ 'disabled' : nextMonthDisabled(pageDate) }\">&gt;</span>" +
                "</header>" +
                "<span class=\"cell year\" v-for=\"year in years\" track-by=\"timestamp\" v-bind:class=\"{ 'selected': year.isSelected, 'disabled': year.isDisabled }\" @click.stop=\"selectYear(year)\">{{ year.year }}</span>" +
            "</div>" +
        "</template>" +
    "</div>" +
"</div>",
     
    props: {
        value: {
            validator: function (val) {
                return val === null || val instanceof Date || typeof val === 'string';
            }
        },
        name: String,
        id: String,
        format: {
            type: [String, Function],
            default: 'dd.MM.yyyy' //d MMM yyyy'
        },
        language: {
            type: String,
            default: 'en'
        },
        fullMonthName: {
            type: Boolean,
            default: false
        },
        placeholder: String,
        inline: Boolean,
        calendarClass: [String, Object],
        inputClass: [String, Object],
        wrapperClass: [String, Object],
        mondayFirst: {
            type: Boolean,
            default: false
        },
        clearButton: {
            type: Boolean,
            default: false
        },
        clearButtonIcon: {
            type: String,
            default: ''
        },
        calendarButton: {
            type: Boolean,
            default: false
        },
        calendarButtonIcon: {
            type: String,
            default: ''
        },
        bootstrapStyling: {
            type: Boolean,
            default: false
        },
        initialView: {
            type: String,
            default: 'day'
        },
        disabledPicker: {
            type: Boolean,
            default: false
        },
        required: {
            type: Boolean,
            default: false
        },
        dayViewOnly: {
            type: Boolean,
            default: false
        }
    },
    data: function() {
        return {
            /*
            * Vue cannot observe changes to a Date Object so date must be stored as a timestamp
            * This represents the first day of the current viewing month
            * {Number}
            */
            pageDate: (new Date()).setDate(1),
            /*
             * Selected Date
             * {Date}
             */
            selectedDate: null,
            /*
             * Flags to show calendar views
             * {Boolean}
             */
            showDayView: false,
            showMonthView: false,
            showYearView: false,
            /*
             * Positioning
             */
            calendarHeight: 0
        }
    },
    watch: {
        value: function (value) {
            this.setValue(value);
        },
        initialView: function () {
            this.setInitialView();
        }
    },
    computed: {
        formattedValue: function () {
            if (!this.selectedDate) {
                return null;
            }
            return typeof this.format === 'function'
                ? this.format(this.selectedDate)
                : DateUtils.formatDate(new Date(this.selectedDate), this.format, this.translation);
        },
        translation: function () {
            return DateLanguages.translations[this.language];
        },
        currMonthName: function () {
            var d = new Date(this.pageDate);
            return DateUtils.getMonthNameAbbr(d.getMonth(), this.fullMonthName ? this.translation.months.original : this.translation.months.abbr);
        },
        currYear: function () {
            var d = new Date(this.pageDate);
            return d.getFullYear();
        },
        /**
         * Returns the day number of the week less one for the first of the current month
         * Used to show amount of empty cells before the first in the day calendar layout
         * @return {Number}
         */
        blankDays: function () {
            var d = new Date(this.pageDate);
            var dObj = new Date(d.getFullYear(), d.getMonth(), 1, d.getHours(), d.getMinutes());
            if (this.mondayFirst) {
                return dObj.getDay() > 0 ? dObj.getDay() - 1 : 6;
            }
            return dObj.getDay();
        },
        daysOfWeek: function () {
            if (this.mondayFirst) {
                var tempDays = this.translation.days.slice();
                tempDays.push(tempDays.shift());
                return tempDays;
            }
            return this.translation.days;
        },
        days: function () {
            var d = new Date(this.pageDate);
            var days = [];
            // set up a new date object to the beginning of the current 'page'
            var dObj = new Date(d.getFullYear(), d.getMonth(), 1, d.getHours(), d.getMinutes());
            var daysInMonth = DateUtils.daysInMonth(dObj.getFullYear(), dObj.getMonth());
            for (var i = 0; i < daysInMonth; i++) {
                days.push({
                    date: dObj.getDate(),
                    timestamp: dObj.getTime(),
                    isSelected: this.isSelectedDate(dObj),
                    isDisabled: this.isDisabledDate(dObj),
                    isHighlighted: this.isHighlightedDate(dObj),
                    isToday: dObj.toDateString() === (new Date()).toDateString(),
                    isWeekend: dObj.getDay() === 0 || dObj.getDay() === 6,
                    isSaturday: dObj.getDay() === 6,
                    isSunday: dObj.getDay() === 0
                });
                dObj.setDate(dObj.getDate() + 1);
            }
            return days;
        },
        months: function () {
            var d = new Date(this.pageDate);
            var months = [];
            // set up a new date object to the beginning of the current 'page'
            var dObj = new Date(d.getFullYear(), 0, d.getDate(), d.getHours(), d.getMinutes());
            for (var i = 0; i < 12; i++) {
                months.push({
                    month: DateUtils.getMonthName(i, this.translation.months.original),
                    timestamp: dObj.getTime(),
                    isSelected: this.isSelectedMonth(dObj),
                    isDisabled: this.isDisabledMonth(dObj)
                });
                dObj.setMonth(dObj.getMonth() + 1);
            }
            return months;
        },
        years: function () {
            var d = new Date(this.pageDate);
            var years = [];
            // set up a new date object to the beginning of the current 'page'
            var dObj = new Date(Math.floor(d.getFullYear() / 10) * 10, d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());
            for (var i = 0; i < 10; i++) {
                years.push({
                    year: dObj.getFullYear(),
                    timestamp: dObj.getTime(),
                    isSelected: this.isSelectedYear(dObj),
                    isDisabled: this.isDisabledYear(dObj)
                });
                dObj.setFullYear(dObj.getFullYear() + 1);
            }
            return years;
        },
        calendarStyle: function () {
            var styles = {};
            if (this.isInline) {
                styles.position = 'static';
            }
            return styles;
        },
        isOpen: function () {
            return this.showDayView || this.showMonthView || this.showYearView;
        },
        isInline: function () {
            return typeof this.inline !== 'undefined' && this.inline;
        },
        isRtl: function () {
            return this.translation.rtl === true;
        }
    },
    methods: {
        /**
         * Close all calendar layers
         */
        close: function () {
            this.showDayView = this.showMonthView = this.showYearView = false;
            if (!this.isInline) {
                this.$emit('closed');
                document.removeEventListener('click', this.clickOutside, false);
            }
        },
        resetDefaultDate: function () {
            if (this.selectedDate === null) {
                this.setPageDate();
                return;
            }
            this.setPageDate(this.selectedDate);
        },
        /**
         * Effectively a toggle to show/hide the calendar
         * @return {mixed} [description]
         */
        showCalendar: function () {
            if (this.disabledPicker) {
                return false;
            }
            if (this.isInline) {
                return false;
            }
            if (this.isOpen) {
                return this.close();
            }
            this.setInitialView();
        },
        setInitialView: function () {
            switch (this.initialView) {
                case 'year':
                    this.showYearCalendar();
                    break;
                case 'month':
                    this.showMonthCalendar();
                    break;
                default:
                    this.showDayCalendar();
                    break;
            }
        },
        showDayCalendar: function () {
            this.close();
            this.showDayView = true;
            if (!this.isInline) {
                this.$emit('opened');
                document.addEventListener('click', this.clickOutside, false);
            }
        },
        showMonthCalendar: function () {
            if (this.dayViewOnly)
                return false;
            this.close();
            this.showMonthView = true;
            if (!this.isInline) {
                this.$emit('opened');
                document.addEventListener('click', this.clickOutside, false);
            }
        },
        showYearCalendar: function () {
            this.close();
            this.showYearView = true;
            if (!this.isInline) {
                this.$emit('opened');
                document.addEventListener('click', this.clickOutside, false);
            }
        },
        setDate: function (timestamp) {
            var date = new Date(timestamp);
            this.selectedDate = new Date(date);
            this.setPageDate(date);
            this.$emit('selected', new Date(date));
            this.$emit('input', new Date(date));
        },
        clearDate: function () {
            this.selectedDate = null;
            this.$emit('selected', null);
            this.$emit('input', null);
            this.$emit('cleared');
        },
        /**
         * @param {Object} day
         */
        selectDate: function (day) {
            if (day.isDisabled) {
                return false;
            }
            this.setDate(day.timestamp);
            if (this.isInline) {
                return this.showDayCalendar();
            }
            this.close();
        },
        /**
         * @param {Object} month
         */
        selectMonth: function (month) {
            if (month.isDisabled) {
                return false;
            }
            var date = new Date(month.timestamp);
            this.setPageDate(date);
            this.showDayCalendar();
            this.$emit('changedMonth', month);
        },
        /**
         * @param {Object} year
         */
        selectYear: function (year) {
            if (year.isDisabled) {
                return false;
            }
            var date = new Date(year.timestamp);
            this.setPageDate(date);
            this.showMonthCalendar();
            this.$emit('changedYear', year);
        },
        /**
         * @return {Number}
         */
        getPageDate: function () {
            var date = new Date(this.pageDate);
            return date.getDate();
        },
        /**
         * @return {Number}
         */
        getPageMonth: function () {
            var date = new Date(this.pageDate);
            return date.getMonth();
        },
        /**
         * @return {Number}
         */
        getPageYear: function () {
            var date = new Date(this.pageDate);
            return date.getFullYear();
        },
        /**
         * @return {String}
         */
        getPageDecade: function () {
            var date = new Date(this.pageDate);
            var sD = Math.floor(date.getFullYear() / 10) * 10;
            return sD + '\'s';
        },
        previousMonth: function () {
            if (this.previousMonthDisabled()) {
                return false;
            }
            var date = new Date(this.pageDate);
            date.setMonth(date.getMonth() - 1);
            this.setPageDate(date);
            this.$emit('changedMonth', date);
        },
        previousMonthDisabled: function () {
            if (typeof this.disabled === 'undefined' || typeof this.disabled.to === 'undefined' || !this.disabled.to) {
                return false;
            }
            var d = new Date(this.pageDate);
            return this.disabled.to.getMonth() >= d.getMonth() &&
                this.disabled.to.getFullYear() >= d.getFullYear();
        },
        nextMonth: function () {
            if (this.nextMonthDisabled()) {
                return false;
            }
            var date = new Date(this.pageDate);
            date.setMonth(date.getMonth() + 1);
            this.setPageDate(date);
            this.$emit('changedMonth', date);
        },
        nextMonthDisabled: function () {
            if (typeof this.disabled === 'undefined' || typeof this.disabled.from === 'undefined' || !this.disabled.from) {
                return false;
            }
            var d = new Date(this.pageDate);
            return this.disabled.from.getMonth() <= d.getMonth() &&
                this.disabled.from.getFullYear() <= d.getFullYear();
        },
        previousYear: function () {
            if (this.previousYearDisabled()) {
                return false;
            }
            var date = new Date(this.pageDate);
            date.setYear(date.getFullYear() - 1);
            this.setPageDate(date);
            this.$emit('changedYear');
        },
        previousYearDisabled: function () {
            if (typeof this.disabled === 'undefined' || typeof this.disabled.to === 'undefined' || !this.disabled.to) {
                return false;
            }
            var d = new Date(this.pageDate);
            return this.disabled.to.getFullYear() >= d.getFullYear();
        },
        nextYear: function () {
            if (this.nextYearDisabled()) {
                return false;
            }
            var date = new Date(this.pageDate);
            date.setYear(date.getFullYear() + 1);
            this.setPageDate(date);
            this.$emit('changedYear');
        },
        nextYearDisabled: function () {
            if (typeof this.disabled === 'undefined' || typeof this.disabled.from === 'undefined' || !this.disabled.from) {
                return false;
            }
            var d = new Date(this.pageDate);
            return this.disabled.from.getFullYear() <= d.getFullYear();
        },
        previousDecade: function () {
            if (this.previousDecadeDisabled()) {
                return false;
            }
            var date = new Date(this.pageDate);
            date.setYear(date.getFullYear() - 10);
            this.setPageDate(date);
            this.$emit('changedDecade');
        },
        previousDecadeDisabled: function () {
            if (typeof this.disabled === 'undefined' || typeof this.disabled.to === 'undefined' || !this.disabled.to) {
                return false;
            }
            var d = new Date(this.pageDate);
            return Math.floor(this.disabled.to.getFullYear() / 10) * 10 >= Math.floor(d.getFullYear() / 10) * 10;
        },
        nextDecade: function () {
            if (this.nextDecadeDisabled()) {
                return false;
            }
            var date = new Date(this.pageDate);
            date.setYear(date.getFullYear() + 10);
            this.setPageDate(date);
            this.$emit('changedDecade');
        },
        nextDecadeDisabled: function () {
            if (typeof this.disabled === 'undefined' || typeof this.disabled.from === 'undefined' || !this.disabled.from) {
                return false;
            }
            var d = new Date(this.pageDate);
            return Math.ceil(this.disabled.from.getFullYear() / 10) * 10 <= Math.ceil(d.getFullYear() / 10) * 10;
        },
        /**
         * Whether a day is selected
         * @param {Date}
         * @return {Boolean}
         */
        isSelectedDate: function (dObj) {
            return this.selectedDate && this.selectedDate.toDateString() === dObj.toDateString();
        },
        disableTo: function(val) {
            if (typeof this.disabled.to === 'undefined') {
                this.disabled = {
                    to: null,
                    from: this.disabled.from
                };
            }
            this.disabled.to = val;
        },
        disableFrom:function (val) {
            if (typeof this.disabled.from === 'undefined') {
                this.disabled = {
                    to: this.disabled.to,
                    from: null
                };
            }
            this.disabled.from = val;
        },
        /**
         * Whether a day is disabled
         * @param {Date}
         * @return {Boolean}
         */
        isDisabledDate: function (date) {
            var disabled = false;
            if (typeof this.disabled === 'undefined') {
                return false;
            }
            if (typeof this.disabled.dates !== 'undefined') {
                this.disabled.dates.forEach(function (d) {
                    if (date.toDateString() === d.toDateString()) {
                        disabled = true;
                        return true;
                    }
                });
            }
            if (typeof this.disabled.to !== 'undefined' && this.disabled.to && date < this.disabled.to) {
                disabled = true;
            }
            if (typeof this.disabled.from !== 'undefined' && this.disabled.from && date > this.disabled.from) {
                disabled = true;
            }
            if (typeof this.disabled.days !== 'undefined' && this.disabled.days.indexOf(date.getDay()) !== -1) {
                disabled = true;
            }
            return disabled;
        },
        /**
         * Whether a day is highlighted (only if it is not disabled already)
         * @param {Date}
         * @return {Boolean}
         */
        isHighlightedDate: function (date) {
            if (this.isDisabledDate(date)) {
                return false;
            }
            var highlighted = false;
            if (typeof this.highlighted === 'undefined') {
                return false;
            }
            if (typeof this.highlighted.dates !== 'undefined') {
                this.highlighted.dates.forEach(function (d) {
                    if (date.toDateString() === d.toDateString()) {
                        highlighted = true;
                        return true;
                    }
                });
            }
            if (this.isDefined(this.highlighted.from) && this.isDefined(this.highlighted.to)) {
                highlighted = date >= this.highlighted.from && date <= this.highlighted.to;
            }
            if (typeof this.highlighted.days !== 'undefined' && this.highlighted.days.indexOf(date.getDay()) !== -1) {
                highlighted = true;
            }
            return highlighted;
        },
        /**
         * Helper
         * @param  {mixed}  prop
         * @return {Boolean}
         */
        isDefined: function (prop) {
            return typeof prop !== 'undefined' && prop;
        },
        /**
         * Whether the selected date is in this month
         * @param {Date}
         * @return {Boolean}
         */
        isSelectedMonth: function (date) {
            return (this.selectedDate &&
                this.selectedDate.getFullYear() === date.getFullYear() &&
                this.selectedDate.getMonth() === date.getMonth());
        },
        /**
         * Whether a month is disabled
         * @param {Date}
         * @return {Boolean}
         */
        isDisabledMonth: function (date) {
            var disabled = false;
            if (typeof this.disabled === 'undefined') {
                return false;
            }
            if (typeof this.disabled.to !== 'undefined' && this.disabled.to) {
                if ((date.getMonth() < this.disabled.to.getMonth() && date.getFullYear() <= this.disabled.to.getFullYear()) ||
                    date.getFullYear() < this.disabled.to.getFullYear()) {
                    disabled = true;
                }
            }
            if (typeof this.disabled.from !== 'undefined' && this.disabled.from) {
                if (this.disabled.from &&
                    (date.getMonth() > this.disabled.from.getMonth() && date.getFullYear() >= this.disabled.from.getFullYear()) ||
                    date.getFullYear() > this.disabled.from.getFullYear()) {
                    disabled = true;
                }
            }
            return disabled;
        },
        /**
         * Whether a year is disabled
         * @param {Date}
         * @return {Boolean}
         */
        isSelectedYear: function (date) {
            return this.selectedDate && this.selectedDate.getFullYear() === date.getFullYear();
        },
        /**
         * Whether a month is disabled
         * @param {Date}
         * @return {Boolean}
         */
        isDisabledYear: function (date) {
            var disabled = false;
            if (typeof this.disabled === 'undefined' || !this.disabled) {
                return false;
            }
            if (typeof this.disabled.to !== 'undefined' && this.disabled.to) {
                if (date.getFullYear() < this.disabled.to.getFullYear()) {
                    disabled = true;
                }
            }
            if (typeof this.disabled.from !== 'undefined' && this.disabled.from) {
                if (date.getFullYear() > this.disabled.from.getFullYear()) {
                    disabled = true;
                }
            }
            return disabled;
        },
        /**
         * Set the datepicker value
         * @param {Date|String|null} date
         */
        setValue: function (date) {
            if (typeof date === 'string') {
                var parsed = new Date(date);
                date = isNaN(parsed.valueOf()) ? null : parsed;
            }
            if (!date) {
                this.setPageDate();
                this.selectedDate = null;
                return;
            }
            this.selectedDate = date;
            this.setPageDate(date);
        },
        setPageDate: function (date) {
            if (!date) {
                date = new Date();
            }
            this.pageDate = (new Date(date)).setDate(1);
        },
        /**
         * Close the calendar if clicked outside the datepicker
         * @param  {Event} event
         */
        clickOutside: function (event) {
            if (this.$el && !this.$el.contains(event.target)) {
                if (this.isInline) {
                    return this.showDayCalendar();
                }
                this.resetDefaultDate();
                this.close();
                document.removeEventListener('click', this.clickOutside, false);
            }
        },
        dayClasses: function (day) {
            return {
                'selected': day.isSelected,
                'disabled': day.isDisabled,
                'highlighted': day.isHighlighted,
                'today': day.isToday,
                'weekend': day.isWeekend,
                'sat': day.isSaturday,
                'sun': day.isSunday
            };
        },
        init: function () {
            if (this.value) {
                this.setValue(this.value);
            }
            if (this.isInline) {
                this.setInitialView();
            }
        }
    },
    mounted: function () {
        this.init();
    }
}

